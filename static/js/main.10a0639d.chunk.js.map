{"version":3,"sources":["components/Loading.jsx","store/store.js","apps.js","App.js","reportWebVitals.js","index.js"],"names":["props","loading","className","initialState","user","name","actions","initGlobalState","onGlobalStateChange","state","prev","key","getGlobalState","apps","entry","process","activeRule","container","map","item","routerBase","store","App","useState","activeUrl","setActiveUrl","storeState","useEffect","path","window","location","pathname","activeMenu","find","includes","class","href","data-hotkey","aria-label","data-ga-click","height","viewBox","version","width","aria-hidden","fill-rule","d","menu","classNames","onClick","title","history","pushState","JSON","stringify","Loading","id","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","render","appContent","document","getElementById","ReactDOM","StrictMode","content","loader","microApps","app","registerMicroApps","beforeLoad","console","log","beforeMount","afterMount","afterUnmount","setDefaultMountApp","start"],"mappings":"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","file":"static/js/main.10a0639d.chunk.js","sourcesContent":["\nexport default (props) => {\n  const { loading } = props;\n  return (\n    <>\n      {loading && <h4 className=\"mainapp-loading\">loading...</h4>}\n    </>\n  )\n}","import { initGlobalState } from 'qiankun';\n\nconst initialState = {\n  user: {\n    name: 'qiankun'\n  }\n};\n\nconst actions = initGlobalState(initialState);\n\nactions.onGlobalStateChange((state, prev) => {\n  for(const key in state) {\n    initialState[key] = state[key];\n  }\n})\n\nactions.getGlobalState = (key) => {\n  return key ? initialState[key] : initialState;\n}\n\nexport default actions;\n","import store from './store/store'\n\nconst microApps = [\n  {\n    name: 'react',\n    entry: process.env.REACT_APP_SUB_REACT,\n    activeRule: '/react',\n    container: '#subapp-viewport',\n  },\n  {\n    name: 'vue',\n    entry: process.env.REACT_APP_SUB_VUE,\n    activeRule: '/vue',\n    container: '#subapp-viewport',\n  },\n]\n\nconst apps = microApps.map(item => {\n  return {\n    ...item,\n    props: {\n      routerBase: item.activeRule,\n      getGlobalState: store.getGlobalState,\n    }\n  }\n})\n\nexport default apps\n","import { useEffect, useState } from 'react';\nimport Loading from './components/Loading';\nimport apps from './apps';\nimport store from './store/store'\nimport classNames from 'classnames';\nimport './App.css';\n\nfunction App(props) {\n  const { loading } = props;\n  const [activeUrl, setActiveUrl] = useState(apps?.[0]?.activeRule);\n  const storeState = store.getGlobalState();\n  useEffect(() => {\n    const path = window?.location?.pathname;\n    const activeMenu = apps.find(item => path?.includes(item.activeRule));\n    if(activeMenu) {\n      setActiveUrl(activeMenu?.activeRule);\n    }\n  }, [])\n  const push = (title, href) => {\n    setActiveUrl(href);\n    window.history.pushState({}, title, href);\n  }\n  const getMenuClassName = (activeRule) => {\n    return classNames('mainapp-header-sidemenu-sub', {\n      'mainapp-header-sidemenu-sub-active': activeUrl === activeRule,\n    });\n  }\n  return (\n    <>\n      <div className=\"mainapp\">\n        {/* 标题栏 */}\n        <header className=\"mainapp-header\">\n          <div className='mainapp-header-github'>\n            <a class=\"mainapp-header-github-logo\" href=\"https://github.com/niexq/react-app-qiankun-main\" data-hotkey=\"g d\" aria-label=\"Homepage \" data-ga-click=\"Header, go to dashboard, icon:logo\">\n              <svg class=\"octicon octicon-mark-github v-align-middle\" height=\"32\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"32\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z\"></path></svg>\n            </a>\n            <span className=\"mainapp-header-github-title\">QianKunDemo</span>\n          </div>\n          <ul className=\"mainapp-header-sidemenu\">\n            {/* 侧边栏 */}\n            {apps.map((menu) => (\n              <li key={`${menu.container}_${menu.activeRule}`} className={getMenuClassName(menu.activeRule)} onClick={() => push(null, menu.activeRule, menu.activeRule)}>{menu.name}</li>\n            ))}\n          </ul>\n          <span className='mainapp-header-store'>{`基座中显示-主应用的数据：${JSON.stringify(storeState)}`}</span>\n        </header>\n        <div className=\"mainapp-main\">\n          {/* 子应用 */}\n          <Loading loading={loading} />\n          <main id=\"subapp-viewport\"></main>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { registerMicroApps, start, setDefaultMountApp } from 'qiankun';\nimport apps from './apps'\n\nfunction render({ appContent, loading }) {\n  const container = document.getElementById('main-root');\n  ReactDOM.render(\n    <React.StrictMode>\n      <App loading={loading} content={appContent} />\n    </React.StrictMode>,\n    container,\n  )\n}\n\nconst loader = loading => render({ loading });\n\nrender({ loading: true });\n\nconst microApps = apps.map((app => ({\n  ...app,\n  loader,\n})))\nregisterMicroApps(microApps, {\n  beforeLoad: app => {\n    console.log('before load app.name=====>>>>>', app.name)\n  },\n  beforeMount: [\n    app => {\n      console.log('[LifeCycle] before mount %c%s', 'color: green;', app.name)\n    }\n  ],\n  afterMount: [\n    app => {\n      console.log('[LifeCycle] after mount %c%s', 'color: green;', app.name)\n    }\n  ],\n  afterUnmount: [\n    app => {\n      console.log('[LifeCycle] after unmount %c%s', 'color: green;', app.name)\n    }\n  ]\n})\n\nsetDefaultMountApp('/react')\n\nstart();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}